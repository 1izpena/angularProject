<div class="panel panel-info" id="panel-detail-task">

  <!-- le hacemos flexbox y metemos colums -->

  <div class="panel-body panel-body-detail-task" id="panel-body-detail-task">
    <div class="summary-header-detail-task-parent">


      <div class="summary-header-detail-task">

        <div class="summary-detail-view">

              <span title="Issue votes" class="votes">{{rowCollectionIssues[tagIssue].voters.length}}
              </span>
          <i ng-click="editVoteIssue(0)" ng-show="!tagUserstoryTemp.disableVote" class="fa fa-plus"></i>
          <i ng-click="editVoteIssue(1)" ng-show="tagUserstoryTemp.disableVote" class="fa fa-minus"></i>

        </div>

        <div class="summary-detail-view1">
          <span class="subject">#{{rowCollectionIssues[tagIssue].num}}</span>

        </div>

        <div class="summary-detail-view2">
              <span class="subject" editable-text="tagUserstory.tasks[tagTask].subject" e-required
                    onbeforesave="editSubjectIssue($data, rowCollectionIssues[tagIssue])">
                                  {{ rowCollectionIssues[tagIssue].subject }}
                                     </span>
        </div>

        <div class="summary-detail-view3">
              <span class="nexttask">
                <i class="fa fa-angle-right fa-lg"></i>
              </span>
        </div>

      </div><!-- end div summary-header-detail-userstory -->


      <div class="summary-detail-body1">
        <div class="created-by">
          <p> Created by
            <a ng-click=""> {{rowCollectionIssues[tagIssue].createdby.username}}
            </a>
          </p>
          <p> {{rowCollectionIssues[tagIssue].datetime | date:'medium'}}</p>
        </div>

        <div>
          <img
            ng-src="http://www.gravatar.com/avatar/{{getHash(rowCollectionIssues[tagIssue].createdby.mail)}}?s=50&d=identicon"
            alt="User Avatar"
            class="avatar" id="img-circle3"/>
        </div>


        <!-- boton para ver o no los comments y volver atras  -->
        <div class="view-comments-detail-task">
          <button class="btn related-comments" type="button">

              <span ng-click="goBackFromDetailIssue()"
                    aria-hidden="true">
                <i class="fa fa-arrow-left" aria-hidden="true"></i>

              </span>

            Related comments

                <span
                  ng-click ="viewRelatedCommentsIssue()"
                  ng-class="item.viewRelatedComments ? 'glyphicon glyphicon glyphicon-chevron-up' :'glyphicon glyphicon glyphicon-chevron-down'"
                  aria-hidden="true">

                </span>



          </button>




        </div>
      </div>

    </div> <!-- end div summary-header-detail-task-parent -->








    <!-- class to view tasks in detail -->
    <div class="summary-body-detail-task animate-show" ng-hide="item.viewRelatedComments" >

      <!-- tenemos subject 3 combos + assignedto, description y related comments + us -->


      <div class="summary-detail-task-body2"> <!-- column -->
        <div class="summary-detail-task-body2-child"> <!-- row -->

          <div class="summary-detail-task-body2-child-body1"> <!-- column -->


            <!-- ponemos todos los combos juntos -->


            <div class="row">
              <div class="col-md-4">
                <!-- type -->
                <div class="form-group">
                  <label for="issueType">Type:</label>
                  <oi-select oi-options="item for item in statics.type track by item"
                             ng-model="rowCollectionIssues[tagIssue].type"
                             id="issueType"
                             ng-change="editTypeIssue()"
                             required> </oi-select>
                </div>
              </div>



              <div class="col-md-4">
                <!-- severity -->
                <div class="form-group">
                  <label for="issueSeverity">Severity:</label>
                  <oi-select oi-options="item for item in statics.severity track by item"
                             ng-model="rowCollectionIssues[tagIssue].severity"
                             id="issueSeverity"
                             ng-change="editSeverityIssue()"
                             required> </oi-select>
                </div>
              </div>


              <div class="col-md-4">
                <!-- priority -->
                <div class="form-group">
                  <label for="issuePriority">Priority:</label>
                  <oi-select oi-options="item for item in statics.priority track by item"
                             ng-model="rowCollectionIssues[tagIssue].priority"
                             id="issuePriority"
                             ng-change="editPriorityIssue()"
                             required> </oi-select>
                </div>
              </div>




            </div>





            <div class="row">
              <div class="col-md-8">
                <!-- status  -->
                <div class="form-group">
                  <label for="issueStatus">Status:</label>
                  <oi-select oi-options="item for item in statics.status track by item"
                             ng-model="rowCollectionIssues[tagIssue].status"
                             id="issueStatus"
                             ng-change="editStatusIssuek()"
                             required> </oi-select>
                </div>



                <!---------------- comienzo prueba lista ------------------------------>
                <div class="panel panel-info" ng-repeat="rowUS in rowCollectionUserStories"
                     ng-show="rowUS.sprint == tagSprint.id && $index == 0">
                  <div class="panel-heading" id="panel-heading-color-white">

                    <div class="form-contributors-btn">

                      <button title="new task" type="button" class="btn btn-info pull-left"
                              data-toggle="modal" data-target="#newTaskSprintModal" ng-click="assignUStoRow($index)">
                        <span class="fa fa-plus"></span>
                      </button>
                      <a class="try-label">
                        #{{rowUS.num}} {{rowUS.subject}}
                      </a>
                      <button type="button" class="btn btn-info pull-left" ng-click="viewTasksContainer($index)">
                        <span class="fa fa-chevron-down"></span>
                      </button>





                    </div>


                  </div>




                  <!-- ha esto le tengo que llamar:: viewTasksContainer($parent.$index) -->
                  <div class="panel-body" ng-show="rowCollectionUserStories.length == 0">

                    <!-- queremos el US solo num y subject y status, persona?? tmbn  -->


                    <ul dnd-list="rowUS">

                      <li>

                      <div class="text-img">
                     <!-- <li ng-repeat="rowUS in rowCollectionUserStories"
                          ng-class="row.status == 'New' ? 'status-new' :
                              (row.status == 'In progress' ? 'status-in-progress' :
                               (row.status == 'Closed' ? 'status-closed' :'status-ready-for-test'))">-->


                        <!-- los US no se assignan a nadie -->
                        <!-------------- sin assignar -------------------------------->
                        <!--<div class="text-img">
                          <img ng-show="rowTask.assignedto == undefined || rowTask.assignedto.id == undefined"
                               ng-src="http://www.gravatar.com/avatar/{{getHash('internalUser@localhost')}}?s=40&d=identicon"
                               alt="User Avatar"
                               class="avatarin avatarin-opacity"
                               ng-click="changeTaskAssignedtoFromList(rowUS, rowTask, $index)"/>



                          <!--------------------- assignado ------------------------------
                          <img ng-show="rowTask.assignedto !== undefined && rowTask.assignedto.id !== undefined"
                               ng-src="http://www.gravatar.com/avatar/{{getHash(rowTask.assignedto.mail)}}?s=40&d=identicon"
                               alt="User Avatar"
                               class="avatarin"
                               ng-click="changeTaskAssignedtoWithUnassignedFromList(rowUS, rowTask, $index)"/>




                          <p ng-click="">#{{rowTask.num}} {{rowTask.subject}}</p>


                          <!--------------- ponemos icono de borrar ------------------------>


                          <!-- queremos ver taskdetail -->
                    <span class="nexttask-edit" ng-click="viewSprintDetailTaskFromDash(row, $index)">
                      <i class="fa fa-pencil"></i>
                    </span>

                          <!-- esto es para desasignar el us -->
                    <span class="nexttask-edit" ng-click="removeTaskFromSprint(row.id)">
                      <i class="fa fa-trash-o"></i>
                    </span>

                        </div>






                      </li>
                    </ul>

                  </div>
                </div>























































                <!-- end prueba lista ----------------->


              </div> <!-- end row md-8 -->



              <div class="col-md-4">
                <!-- assigned -->


                <div class="summary-detail-task-body21-child-body2"
                     ng-show="rowCollectionIssues[tagIssue].assignedto !== undefined
                 && rowCollectionIssues[tagIssue].assignedto.id !== undefined"> <!-- este es column -->

                  <div>
                    <img
                      ng-src="http://www.gravatar.com/avatar/{{getHash(rowCollectionIssues[tagIssue].assignedto.mail)}}?s=50&d=identicon"
                      alt="User Avatar"
                      class="avatar" id="img-circle6"
                      ng-click="changeIssueAssignedto(rowCollectionIssues[tagIssue], tagIssue)"/>
                  </div>

                  <div class="summary-detail-task-body2-child-body2-assignedto">
                    <p> Assigned to </p>
                    <a> {{tagUserstory.tasks[tagTask].assignedto.username}}
                    </a>
                  </div>



                <span>
                  <i ng-click="unassignedIssue(rowCollectionIssues[tagIssue])" class="fa fa-times" aria-hidden="true"></i>
                </span>



                </div>


                <!-- lo mismo para NOT ASSIGNED -->
                <div class="summary-detail-task-body21-child-body2"
                     ng-show="rowCollectionIssues[tagIssue].assignedto == undefined ||
                          rowCollectionIssues[tagIssue].assignedto.id == undefined"> <!-- este es column -->

                  <div>
                    <img
                      ng-src="http://www.gravatar.com/avatar/{{getHash('internalUser@localhost')}}?s=50&d=identicon"
                      alt="User Avatar"
                      class="avatar" id="img-circle7"
                      ng-click="changeIssueAssignedto(rowCollectionIssues[tagIssue], tagIssue)"/>
                  </div>

                  <div class="summary-detail-task-body2-child-body2-assignedto">
                    <p> Assigned to </p>
                    <a ng-click=""> Not assigned
                    </a>
                  </div>

                </div>




              </div>







            </div>









            <!-- <div class="form-group">
               <label>Status:</label>

               <oi-select oi-options="item for item in statics.status track by item"
                          ng-model="tagUserstory.tasks[tagTask].status"
                          ng-change="editStatusTask()"
                          required>

               </oi-select>
             </div> <!-- end form-group -->









          </div>





          <!-- de momento aqui nada, podemos meter us

          <!-- aqui irian los contributors si hay -->
          <!-- <span aria-hidden="true">&times;</span> -->

<!--
          <div class="form-contributors">

            <div class="form-contributors-btn">

              <button title="new contributor"
                      ng-click="addContributorTask( contributor)"
                      type="button" class="btn btn-info">
                <span class="fa fa-user-plus"></span>
              </button>
              <button type="button" class="btn btn-info btn-label-contributor">
                Contributors
              </button>

            </div>



            <div class="contributors-list">
              <ul class="media-list list-group" ng-show="tagUserstory.tasks[tagTask].contributors !== undefined || tagUserstory.tasks[tagTask].contributors.length > 0">

                <li class="media list-group-item" ng-repeat="contributor in tagUserstory.tasks[tagTask].contributors">

                  <div class="comment">
                    <img
                      ng-src="http://www.gravatar.com/avatar/{{getHash(contributor.mail)}}?s=50&d=identicon"
                      alt="User Avatar"
                      class="avatar-comments"/>


                    <div class="media-body">
                      <strong class="username">{{contributor.username}} </strong>
                          <span>
                            <i ng-click="removeContributorTask(contributor)" class="fa fa-times" aria-hidden="true"></i>
                          </span>
                    </div>

                    <div class="clearfix"></div>

                  </div> <!-- end div comments --
                </li>

              </ul>
            </div>


          </div> <!--end contributors:: derecha -->




        </div> <!-- end hacemos columnas:: row -->

      </div> <!-- end hacemos filas:: columns -->






      <!-- description -->
      <div class="summary-detail-body4">
        <div class="form-group">
          <label for="taskDescr">Description:</label>
          <p id="taskDescr" editable-textarea="rowCollectionIssues[tagIssue].description"
             e-required
             onbeforesave="editDescriptionIssue($data, tagUserstory.tasks[tagTask])">
            {{ rowCollectionIssues[tagIssue].description || 'Enter description to helps others better understand...' }}

          </p>
        </div>
      </div>



      <!--
      <div class="summary-detail-body5">
        <div class="form-group requirements-task">
          <!-- solo requirement --

          <div class="btn-group">
            <label type='button' ng-click="editRequirementTask(0)" class="btn btn-warning" ng-model="tagUserstory.tasks[tagTask].requirement.blocked" uib-btn-checkbox>Blocked</label>
            <label type='button' ng-click="editRequirementTask(1)" class="btn btn-info" ng-model="tagUserstory.tasks[tagTask].requirement.iocaine" uib-btn-checkbox>Support</label>

          </div>


        </div>
      </div>
-->


    </div> <!-- end view detail -->






    <!-- aqui ponemos los comments -->
    <div class="summary-body-detail-task-comments animate-show" ng-show="item.viewRelatedComments" >


      <div class="well well-custom" scroll-bottom-on-last="rowCollectionIssues[tagIssue].comments">
        <ul class="media-list list-group">



          <!-- elfalso -->
          <li class="media list-group-item"
              ng-show="rowCollectionIssues[tagIssue].comments == undefined || rowCollectionIssues[tagIssue].comments.length == 0">
            <div class="comment">

              <img
                ng-src="http://www.gravatar.com/avatar/{{getHash('internalUser@localhost')}}?s=50&d=identicon"
                alt="User Avatar"
                class="avatar-comments"/>


              <div class="media-body">

                <strong class="username">MeanStack </strong>
                <small class="date date-comments" >
                  <span class="glyphicon glyphicon-time"></span>

                  <span>Right now</span>
                </small>

                <p> Empty space is so boring ... </p>

              </div>
              <div class="clearfix"></div>

            </div>
          </li>



          <!-- --------------- el real ------------------ -->
          <li class="media list-group-item"
              ng-repeat="comment in rowCollectionIssues[tagIssue].comments" send-last
              ng-show="rowCollectionIssues[tagIssue].comments !== undefined && rowCollectionIssues[tagIssue].comments.length > 0"
              name="{{comment.id}}" id="{{comment.id}}">

            <div class="comment">

              <img
                ng-src="http://www.gravatar.com/avatar/{{getHash(comment.user.mail)}}?s=50&d=identicon"
                alt="User Avatar"
                class="avatar-comments"/>


              <div class="media-body">

                <strong class="username">{{comment.user.username}}</strong>
                <small class="date date-comments" >
                  <span class="glyphicon glyphicon-time"></span>
                  <span am-time-ago="comment.created"></span>

                </small>


                <p>    {{comment.comment}}    </p>
                <small class="date date-comments" ng-show="comment.isEditable" ng-click="removeComment(comment)">
                  <span class="glyphicon glyphicon-trash"></span>
                </small>

              </div>
              <div class="clearfix"></div>
            </div>

          </li>


        </ul>

        <!-- 2 ul's para well class:: comments -->


      </div>

      <!-- end divs con 2 ul's para well class:: comments -->



      <!--<div class="well">-->
      <div class="panel-body comments">
            <textarea class="form-control" placeholder="Type your comment"
                      rows="2" id="commentText"
                      ng-model="item.commentText">
            </textarea>
        <button type="button" class="btn btn-info pull-right" ng-click="sendCommentTextIssue()">
          Submit comment
        </button>
      </div>
      <!-- </div>-->






    </div>





  </div><!-- detail tasks -->

</div> <!--panel-detail-task end detail-task -->
